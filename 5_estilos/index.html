



<!DOCTYPE html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="es">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.2">
    
    
      
        <title>5. Cómo simbolizarlas - Trabajando con VT</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.8d40d89b.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#como-simbolizar-teselas-vectoriales" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Trabajando con VT" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Trabajando con VT
              </span>
              <span class="md-header-nav__topic">
                5. Cómo simbolizarlas
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/geoinquiets/taller-vt/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Trabajando con VT
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/geoinquiets/taller-vt/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../1_teoria/" title="1. Qué son" class="md-nav__link">
      1. Qué son
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2_visor_simple/" title="2. Cómo visualizarlas" class="md-nav__link">
      2. Cómo visualizarlas
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../3_tileserver_gl/" title="3. Cómo servirlas" class="md-nav__link">
      3. Cómo servirlas
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../4_tippecanoe/" title="4. Cómo crearlas" class="md-nav__link">
      4. Cómo crearlas
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        5. Cómo simbolizarlas
      </label>
    
    <a href="./" title="5. Cómo simbolizarlas" class="md-nav__link md-nav__link--active">
      5. Cómo simbolizarlas
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#maputnik" title="Maputnik" class="md-nav__link">
    Maputnik
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalacion" title="Instalación" class="md-nav__link">
    Instalación
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estilizar-el-mbtiles" title="Estilizar el mbtiles" class="md-nav__link">
    Estilizar el mbtiles
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agregar-un-origen-de-datos-source" title="Agregar un origen de datos (Source)" class="md-nav__link">
    Agregar un origen de datos (Source)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agregar-sprite-y-glyph" title="Agregar sprite y glyph" class="md-nav__link">
    Agregar sprite y glyph
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agregar-una-capa" title="Agregar una capa" class="md-nav__link">
    Agregar una capa
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#estilizar-una-capa-segun-un-campo" title="Estilizar una capa según un campo" class="md-nav__link">
    Estilizar una capa según un campo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etiquetar-una-capa" title="Etiquetar una capa" class="md-nav__link">
    Etiquetar una capa
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilizar-un-icono-para-simbolizar-nuestra-capa" title="Utilizar un icono para simbolizar nuestra capa" class="md-nav__link">
    Utilizar un icono para simbolizar nuestra capa
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicio" title="Ejercicio" class="md-nav__link">
    Ejercicio
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exportar-el-estilo-creado" title="Exportar el estilo creado" class="md-nav__link">
    Exportar el estilo creado
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estilo-basado-en-datos-data-driven-style" title="Estilo basado en datos (data-driven style)" class="md-nav__link">
    Estilo basado en datos (data-driven style)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-un-estilo-basado-en-datos" title="Crear un estilo basado en datos" class="md-nav__link">
    Crear un estilo basado en datos
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#estilo-basado-en-valores-concretos-de-una-propiedad" title="Estilo basado en valores concretos de una propiedad" class="md-nav__link">
    Estilo basado en valores concretos de una propiedad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#estilo-basado-en-el-nivel-del-zoom" title="Estilo basado en el nivel del zoom" class="md-nav__link">
    Estilo basado en el nivel del zoom
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#estilo-basado-en-una-propiedad" title="Estilo basado en una propiedad" class="md-nav__link">
    Estilo basado en una propiedad
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../6_sprites_glyphs/" title="6. Sprites y Glyphs" class="md-nav__link">
      6. Sprites y Glyphs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../7_servidor_dinamico/" title="7. Cómo servir datos dinámicos" class="md-nav__link">
      7. Cómo servir datos dinámicos
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#maputnik" title="Maputnik" class="md-nav__link">
    Maputnik
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalacion" title="Instalación" class="md-nav__link">
    Instalación
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estilizar-el-mbtiles" title="Estilizar el mbtiles" class="md-nav__link">
    Estilizar el mbtiles
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agregar-un-origen-de-datos-source" title="Agregar un origen de datos (Source)" class="md-nav__link">
    Agregar un origen de datos (Source)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agregar-sprite-y-glyph" title="Agregar sprite y glyph" class="md-nav__link">
    Agregar sprite y glyph
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agregar-una-capa" title="Agregar una capa" class="md-nav__link">
    Agregar una capa
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#estilizar-una-capa-segun-un-campo" title="Estilizar una capa según un campo" class="md-nav__link">
    Estilizar una capa según un campo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#etiquetar-una-capa" title="Etiquetar una capa" class="md-nav__link">
    Etiquetar una capa
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilizar-un-icono-para-simbolizar-nuestra-capa" title="Utilizar un icono para simbolizar nuestra capa" class="md-nav__link">
    Utilizar un icono para simbolizar nuestra capa
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejercicio" title="Ejercicio" class="md-nav__link">
    Ejercicio
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exportar-el-estilo-creado" title="Exportar el estilo creado" class="md-nav__link">
    Exportar el estilo creado
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estilo-basado-en-datos-data-driven-style" title="Estilo basado en datos (data-driven style)" class="md-nav__link">
    Estilo basado en datos (data-driven style)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-un-estilo-basado-en-datos" title="Crear un estilo basado en datos" class="md-nav__link">
    Crear un estilo basado en datos
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#estilo-basado-en-valores-concretos-de-una-propiedad" title="Estilo basado en valores concretos de una propiedad" class="md-nav__link">
    Estilo basado en valores concretos de una propiedad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#estilo-basado-en-el-nivel-del-zoom" title="Estilo basado en el nivel del zoom" class="md-nav__link">
    Estilo basado en el nivel del zoom
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#estilo-basado-en-una-propiedad" title="Estilo basado en una propiedad" class="md-nav__link">
    Estilo basado en una propiedad
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/geoinquiets/taller-vt/edit/master/docs/5_estilos.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="como-simbolizar-teselas-vectoriales">Cómo simbolizar teselas vectoriales</h1>
<h2 id="maputnik">Maputnik</h2>
<p>Es un editor visual gratuito y abierto para estilos Mapbox GL dirigidos tanto a desarrolladores como a diseñadores de mapas.</p>
<p>Se puede utilizar en línea en <a href="https://maputnik.github.io/editor/"><em>Maputnik editor</em></a> (todo se guarda en el almacenamiento local) ó se puede hacer una instalación local.</p>
<h3 id="instalacion">Instalación</h3>
<p>Si vamos a la página de <a href="https://github.com/maputnik/editor/releases"><em>Releases</em></a> de Maputnik aparece que la última versión es la v1.0.2. Realmente existe una versión v1.1.0 que está en la página de releases pero que no está marcada como la última versión.</p>
<p>Descagaremos la versión v1.1.0 que es la última versión disponible para la fecha de este taller. </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>wget https://github.com/maputnik/editor/archive/v1.1.0.tar.gz
tar -xzvf archivo.tar.gz
</pre></div>
</td></tr></table>

<p>Vamos a la carpeta <em>editor-1.1.0</em> creada al descomprimir el archivo descargado he instalamos las dependencias del Maputnik</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">cd</span> editor-1.1.0
npm install
</pre></div>
</td></tr></table>

<p>Al finalizar la instalación comprobamos que no aparezca ningún error (pueden aparecer algunos WARN) y arrancamos el servidor de Maputnik</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>npm start
</pre></div>
</td></tr></table>

<p>Abrir el navegador y escribir <a href="http://localhost:8888">http://localhost:8888</a> y comprobar que aparece la página del Maputnik</p>
<p><img alt="Maputnik" src="../img/maputnik.png" />
<em>Maputnik</em></p>
<h2 id="estilizar-el-mbtiles">Estilizar el mbtiles</h2>
<p>Por defecto Maputnik nos</p>
<h3 id="agregar-un-origen-de-datos-source">Agregar un origen de datos (Source)</h3>
<p>En el editor del Maputnik en la barra de menú seleccionamos la opción de <strong>Source</strong> para desplegar el diálogo de gestionar fuentes de datos. En la parte inferior del diálogo esta el apartado para agregar una fuente nueva de datos <em>Add New Source</em>. Para agregar nuestra fuente de datos mbtiles tenemos dos opciones.</p>
<p><img alt="Maputnik Add Source" src="../img/maputnik_add_source.png" /></p>
<p><em>Maputnik agregar origen de datos</em></p>
<ol>
<li>Vector (TileJSON URL)</li>
</ol>
<p><em>Source ID</em>: identificador único de la capa: es el nombre que utilizaremos como referencia en las capas. En nuestro caso pondremos <em>natural_earth</em></p>
<p><em>Source Type</em>: tipo de la fuente de datos. Seleccionar la opción de <em>Vector (TileJSON URL)</em></p>
<p><em>TileJSON URL</em>: url del archivo JSON de descripción de la fuente. Pondremos la url de nuestro TileServerGL <a href="http://localhost:8181/data/natural_earth.json">http://localhost:8181/data/natural_earth.json</a></p>
<ol>
<li>Vector (XYZ URL)</li>
</ol>
<p><em>Source ID</em>: identificador único de la capa: es el nombre que utilizaremos como referencia en las capas. En nuestro caso pondremos <em>natural_earth_1</em></p>
<p><em>Source Type</em>: tipo de la fuente de datos. Seleccionar la opción de <em>Vector (XYZ URL)</em></p>
<p><em>TileJSON URL</em>: url del servicio de teselas. Pondremos la url de nuestro TileServerGL <a href="http://localhost:8181/data/natural_earth/{z}/{x}/{y}.pbf">http://localhost:8181/data/natural_earth/{z}/{x}/{y}.pbf</a></p>
<p><em>Min Zoom</em>: 0</p>
<p><em>Max Zoom</em>: 5</p>
<h3 id="agregar-sprite-y-glyph">Agregar sprite y glyph</h3>
<p>En el editor de Maputnik en la barra de menú seleccionamos la opción de <strong>Style Settings</strong> para desplegar el diálogo de gestionar la configuración del estilo.</p>
<p><img alt="Maputnik Style Settings" src="../img/maputnik_style_settings.png" /></p>
<p><em>Maputnik configuración de estilo</em></p>
<p><em>Name</em>: nombre del estilo. En nuestro caso pondremos <strong>natural earth</strong></p>
<p><em>Sprite URL</em>: proporciona una plantilla para cargar imágenes pequeñas para usar en la representación de estilo del fondo, patrones de relleno, patrones de líneas e imagenes de iconos. En nuestro caso pondremos "<a href="https://openmaptiles.github.io/osm-bright-gl-style/sprite">https://openmaptiles.github.io/osm-bright-gl-style/sprite</a>"</p>
<p><em>Glyphs URL</em>: proporciona una plantilla para cargar conjuntos de glifos formato PBF. Aquí es donde se cargan las diferentes fuentes. En nuestro caso pondremos "<a href="https://free.tilehosting.com/fonts/{fontstack}/{range}.pbf?key=RiS4gsgZPZqeeMlIyxFo">https://free.tilehosting.com/fonts/{fontstack}/{range}.pbf?key=RiS4gsgZPZqeeMlIyxFo</a>"</p>
<h3 id="agregar-una-capa">Agregar una capa</h3>
<p>En el editor de Maputnik presionamos el botón de <strong>Add Layer</strong> para desplegar el diálogo de agregar capa al mapa. </p>
<p><img alt="Maputnik Add Layer" src="../img/maputnik_add_layer.png" /></p>
<p><em>Maputnik agregar capa</em></p>
<p><em>ID</em>: identificador único de la capa. Pondremos <em>oceanos</em></p>
<p><em>Type</em>: tipo de capa. Seleccionar la opción de <em>Fill</em> ya que la capa es de tipo polígono</p>
<p><em>Source</em>: identificador del origen de datos. En nuestro caso pondremos <em>natural_earth</em></p>
<p><em>Source Layer</em>: identificador de la capa dentro del origen de datos. Pondremos <em>ocean</em> para agregar la capa de los océanos.</p>
<h3 id="estilizar-una-capa-segun-un-campo">Estilizar una capa según un campo</h3>
<p>En esta versión de maputnik (v1.1.0) no está implemantado el estilo <a href="https://www.mapbox.com/mapbox-gl-js/style-spec/#expressions">basado en expressiones</a>. Se pueden utilizar los <a href="https://blog.mapbox.com/introducing-data-driven-styling-in-mapbox-gl-js-f273121143c3">stops</a> que actualmente estan <em>deprecated</em> para aplicar estilos según el nivel de zoom. En nuestro caso tendremos que utilizar filtros para poder estilizar una capa según un valor de un campo de texto.</p>
<ol>
<li>
<p>Agregar la capa de lineas de Ferry. Presionar el botón de <strong>Add Layer</strong> y rellenar el formulario con la siguiente información:</p>
<p><em>ID</em>: <em>ferrys</em></p>
<p><em>Type</em>: <em>Line</em> ya que la capa es de tipo línea</p>
<p><em>Source</em>: <em>natural_earth</em></p>
<p><em>Source Layer</em>: <em>roads</em> para agregar la capa de carreteras que también contiena las lineas de ferry.</p>
</li>
<li>
<p>Vemos que aparecen todas las carreteras en el mapa.</p>
</li>
<li>
<p>Filtar la información. Selección la capa de <em>ferrys</em> y en el apartado de Filter presionar el botón de <strong>Add filter</strong>. En registro que aparece poner la siguiente información:</p>
</li>
</ol>
<p><img alt="Maputnik Add Filter" src="../img/maputnik_add_filter.png" /></p>
<p><em>Maputnik agregar filtro a una capa</em></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>* Cambiar donde dice name por *type*

* Dejar el selector de comparación en *==*

* Escribir en el campo de valor (que está vacio) *Ferry Route*
</pre></div>
</td></tr></table>

<p>Comprobar que sólo aparacen las líneas de Ferry en el mapa.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Hacer lo mismo para agregar la capa de carreteras principales(Major Highway) y secundarias(Secondary Highway).</p>
</div>
<h3 id="etiquetar-una-capa">Etiquetar una capa</h3>
<ol>
<li>
<p>Agregar la capa de ciudades. Presionar el botón de <strong>Add Layer</strong> y rellenar el formulario con la siguiente información:</p>
<p><em>ID</em>: <em>ciudades_etiquetas</em></p>
<p><em>Type</em>: <em>Symbol</em> ya que queremos que sea de tipo texto</p>
<p><em>Source</em>: <em>natural_earth</em></p>
<p><em>Source Layer</em>: <em>cities</em> para agregar la capa de ciudades.</p>
</li>
<li>
<p>Agregar el campo por el que se quiere etiquetar. Seleccionar la capa de <em>ciudades</em> y en el apartado de <strong>Text layout properties</strong> en el campo <em>Field</em> escribir <strong>{nombre del campo}</strong>. En nuestro caso debemos escribir <em>{NAME}</em>.</p>
</li>
<li>
<p>Estilizar las etiquetas. En el apartado de <strong>Text paint properties</strong> podemos definir el estilo de las etiquetas. Para los textos podemos definir un Halo para que el teto destaque mejor en nuestro mapa.</p>
</li>
</ol>
<h3 id="utilizar-un-icono-para-simbolizar-nuestra-capa">Utilizar un icono para simbolizar nuestra capa</h3>
<ol>
<li>
<p>Agregar la capa de aeropuertos. Presionar el botón de <strong>Add Layer</strong> y rellenar el formulario con la siguiente información:</p>
<p><em>ID</em>: <em>aeropuertos</em></p>
<p><em>Type</em>: <em>Symbol</em> ya que queremos que sea de tipo texto</p>
<p><em>Source</em>: <em>natural_earth</em></p>
<p><em>Source Layer</em>: <em>airports</em> para agregar la capa de aeropuertos.</p>
</li>
<li>
<p>Agregar el icono. Selecccionar la capa de <em>aeropuertos</em> y en el apartado de <strong>Icon layout properties</strong> escribir en el campo <em>Image</em> <strong>airport_11</strong>. Este nombre debe coincidir con alguna imagen definida en el sprite.</p>
</li>
<li>
<p>Comprobar que aparecen los aeropuertos en el mapa</p>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Aqui puede ver la lista de los nombres de las imágenes del sprite que estamos utilizando <a href="https://github.com/openmaptiles/osm-bright-gl-style/tree/master/icons">https://github.com/openmaptiles/osm-bright-gl-style/tree/master/icons</a>.</p>
</div>
<h2 id="ejercicio">Ejercicio</h2>
<p>Agregar y aplicar estilo al resto de capas del <strong>natural_earth.mbtiles</strong></p>
<h3 id="exportar-el-estilo-creado">Exportar el estilo creado</h3>
<p>En el editor de Maputnik en la barra de menú seleccionamos la opción de <strong>Export</strong> para desplegar el diálogo de exportación del estilo.</p>
<p>En el dialogo presionamos el boton de <strong>Download</strong> para descargar el estilo en nuestro ordenador.</p>
<p>Descargamos el archivo y lo renombramos a <strong>natural_earth.json</strong>. Luego lo movemos a la carpeta <em>data</em></p>
<p>Dentro de la carpeta <em>data</em> crear un fichero <strong>config.json</strong>. Para más detalles <a href="http://tileserver.readthedocs.io/en/latest/config.html#">http://tileserver.readthedocs.io/en/latest/config.html#</a></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;styles&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;natural-earth&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;style&quot;</span><span class="o">:</span> <span class="s2">&quot;natural_earth.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;tilejson&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;overlay&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;natural_earth&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;mbtiles&quot;</span><span class="o">:</span> <span class="s2">&quot;natural_earth.mbtiles&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Ejecutar el tileserver utilizando el archivo de configuración creado</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>tileserver-gl-light -c config.test.json -p <span class="m">8181</span>
</pre></div>
</td></tr></table>

<p>Abrir el navegador y escribir <a href="http://localhost:8181">http://localhost:8181</a>. Aparecerá la página del TileServer donde podemos comprobar nuestro estilo presionando el botón de <em>Vector</em></p>
<p>Modificar el archivo <em>index.html</em> para que el visor de mapa para cargue los datos de Natural Earth con el estilo creado en Maputnik</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Mapa VT<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#39;stylesheet&#39;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css&#39;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.js&#39;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;https://mapbox-gl-inspect.lukasmartinelli.ch/dist/mapbox-gl-inspect.css&#39;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#39;stylesheet&#39;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;https://mapbox-gl-inspect.lukasmartinelli.ch/dist/mapbox-gl-inspect.min.js&#39;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
        <span class="nt">html</span><span class="o">,</span> <span class="nt">body</span> <span class="p">{</span>
            <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;map&#39;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">mapboxgl</span><span class="p">.</span><span class="nx">Map</span><span class="p">({</span>
        <span class="nx">container</span><span class="o">:</span> <span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="c1">// id del elemento HTML que contendrá el mapa</span>
<span class="hll">        <span class="nx">style</span><span class="o">:</span> <span class="s1">&#39;http://localhost:8181/styles/natural-earth/style.json&#39;</span><span class="p">,</span> <span class="c1">// Ubicación del estilo</span>
</span>        <span class="nx">center</span><span class="o">:</span> <span class="p">[</span><span class="mf">2.175</span><span class="p">,</span> <span class="mf">41.39</span><span class="p">],</span> <span class="c1">// Ubicación inicial</span>
        <span class="nx">zoom</span><span class="o">:</span> <span class="mi">13</span><span class="p">,</span> <span class="c1">// Zoom inicial</span>
        <span class="nx">bearing</span><span class="o">:</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="c1">// Ángulo de rotación inicial</span>
        <span class="nx">hash</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">// Permite ir guardando la posición del mapa en la URL</span>
    <span class="p">});</span>

    <span class="c1">// Agrega controles de navegación (zoom, rotación) al mapa:</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">mapboxgl</span><span class="p">.</span><span class="nx">NavigationControl</span><span class="p">());</span>

    <span class="c1">// Agregar el control de inspección</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">MapboxInspect</span><span class="p">());</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table>

<h2 id="estilo-basado-en-datos-data-driven-style">Estilo basado en datos (data-driven style)</h2>
<p>El estilo basado en datos le permite estilizar los datos en función de sus propiedades. Por ejemplo, cambiar el radio de un círculo en función de la cantidad de clientes, cambiar el color de un polígono de estado según la población o usar la lógica condicional para crear etiquetas bilingües.</p>
<p>Para crear estilos basados en datos debemos usar las Mapbox GL JS expressions. En la especificación de estilo de Mapbox, el valor de cualquier propiedad de diseño, propiedad de estilo o filtro se puede especificar como una expresión. Las expresiones definen cómo se combinan uno o más valores de propiedad y / o el nivel de zoom actual utilizando operaciones lógicas, matemáticas, de cadena o de color para producir el valor de propiedad de estilo apropiado o la decisión de filtro.</p>
<p>Para más información y ejemplos <a href="https://www.mapbox.com/help/how-map-design-works/#data-driven-styles">https://www.mapbox.com/help/how-map-design-works/#data-driven-styles</a></p>
<h3 id="crear-un-estilo-basado-en-datos">Crear un estilo basado en datos</h3>
<p>Copiar el estilo <strong>natural_earth.json</strong> en un fichero llamado <em>natural_earth_2.json</em></p>
<h4 id="estilo-basado-en-valores-concretos-de-una-propiedad">Estilo basado en valores concretos de una propiedad</h4>
<p>Editar el fichero <em>natural_earth_2.json</em> y eliminar las capas con id <strong>secundarias</strong>, <strong>principales</strong> y <strong>ferrys</strong></p>
<p>Entre la capa con id <em>land</em> y la capa con id <em>aeropuertos</em> crear una capa con id <strong>roads</strong>. El color de las líneas de esta capa varia dependiendo del valor de la propiedad <em>type</em>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;roads&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;local&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source-layer&quot;</span><span class="o">:</span> <span class="s2">&quot;roads&quot;</span><span class="p">,</span>
    <span class="s2">&quot;layout&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;visibility&quot;</span><span class="o">:</span> <span class="s2">&quot;visible&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;paint&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;line-color&quot;</span><span class="o">:</span> <span class="p">[</span>
            <span class="s2">&quot;match&quot;</span><span class="p">,</span>
            <span class="p">[</span>
                <span class="s2">&quot;get&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Secondary Highway&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rgba(206, 32, 79, 1)&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Ferry Route&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rgba(138, 154, 241, 1)&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Major Highway&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rgba(20, 52, 232, 1)&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#000000&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;line-width&quot;</span><span class="o">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</td></tr></table>

<h4 id="estilo-basado-en-el-nivel-del-zoom">Estilo basado en el nivel del zoom</h4>
<p>Editar el fichero <em>natural_earth_2.json</em> modificar la capa <strong>ciudades_etiquetas</strong> para cambiar el tamaño del texto basado en el nivel de zoom del mapa y en la propiedad <em>SCALERANK</em></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;ciudades_etiquetas&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;local&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source-layer&quot;</span><span class="o">:</span> <span class="s2">&quot;cities&quot;</span><span class="p">,</span>
    <span class="s2">&quot;layout&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;symbol-placement&quot;</span><span class="o">:</span> <span class="s2">&quot;point&quot;</span><span class="p">,</span>
    <span class="s2">&quot;text-field&quot;</span><span class="o">:</span> <span class="s2">&quot;{NAME}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;visibility&quot;</span><span class="o">:</span> <span class="s2">&quot;visible&quot;</span><span class="p">,</span>
    <span class="s2">&quot;text-anchor&quot;</span><span class="o">:</span> <span class="s2">&quot;bottom&quot;</span><span class="p">,</span>
    <span class="s2">&quot;text-offset&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
    <span class="s2">&quot;text-size&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;step&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;zoom&quot;</span><span class="p">],</span>
        <span class="p">[</span>
        <span class="s2">&quot;case&quot;</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="s2">&quot;&lt;&quot;</span><span class="p">,</span>
            <span class="p">[</span>
            <span class="s2">&quot;number&quot;</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;SCALERANK&quot;</span><span class="p">]</span>
            <span class="p">],</span>
            <span class="mi">3</span>
        <span class="p">],</span>
        <span class="mi">18</span><span class="p">,</span>
        <span class="mi">0</span>
        <span class="p">],</span>
        <span class="mi">5</span><span class="p">,</span>
        <span class="p">[</span>
        <span class="s2">&quot;case&quot;</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span>
            <span class="p">[</span>
            <span class="s2">&quot;number&quot;</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;SCALERANK&quot;</span><span class="p">]</span>
            <span class="p">],</span>
            <span class="mi">2</span>
        <span class="p">],</span>
        <span class="mi">20</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span>
            <span class="p">[</span>
            <span class="s2">&quot;number&quot;</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;SCALERANK&quot;</span><span class="p">]</span>
            <span class="p">],</span>
            <span class="mi">5</span>
        <span class="p">],</span>
        <span class="mi">14</span><span class="p">,</span>
        <span class="mi">10</span>
        <span class="p">],</span>
        <span class="mi">8</span><span class="p">,</span>
        <span class="p">[</span>
        <span class="s2">&quot;case&quot;</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span>
            <span class="p">[</span>
            <span class="s2">&quot;number&quot;</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;SCALERANK&quot;</span><span class="p">]</span>
            <span class="p">],</span>
            <span class="mi">2</span>
        <span class="p">],</span>
        <span class="mi">24</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span>
            <span class="p">[</span>
            <span class="s2">&quot;number&quot;</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;SCALERANK&quot;</span><span class="p">]</span>
            <span class="p">],</span>
            <span class="mi">5</span>
        <span class="p">],</span>
        <span class="mi">18</span><span class="p">,</span>
        <span class="mi">14</span>
        <span class="p">]</span>
    <span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;paint&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;text-halo-color&quot;</span><span class="o">:</span> <span class="s2">&quot;rgba(253, 253, 253, 1)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;text-halo-width&quot;</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;text-color&quot;</span><span class="o">:</span> <span class="s2">&quot;rgba(16, 16, 16, 1)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;text-halo-blur&quot;</span><span class="o">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<h4 id="estilo-basado-en-una-propiedad">Estilo basado en una propiedad</h4>
<p>Crear una capa con id <strong>ciudades</strong> y de tipo <em>circle</em> entre las capas <em>aeropuertos</em> y la capa <em>ciudades_etiquetas</em>. En esta nueva capa el tamaño del circulo utilizará directamente el valor de la propiedad <em>SCALERANK</em></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;ciudades&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;circle&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;local&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source-layer&quot;</span><span class="o">:</span> <span class="s2">&quot;cities&quot;</span><span class="p">,</span>
    <span class="s2">&quot;layout&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;visibility&quot;</span><span class="o">:</span> <span class="s2">&quot;visible&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;paint&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;circle-color&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;match&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;ADM0CAP&quot;</span><span class="p">],</span>
        <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;hsl(285, 75%, 68%)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hsl(0, 96%, 48%)&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;circle-radius&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span><span class="s2">&quot;SCALERANK&quot;</span><span class="p">]]</span>
    <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</td></tr></table>

<p>Agregar el nuevo estilo al fichero de configuración <em>config.json</em> del tileserver-gl</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;styles&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;natural-earth&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;style&quot;</span><span class="o">:</span> <span class="s2">&quot;natural_earth.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;tilejson&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;overlay&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
<span class="hll">    <span class="s2">&quot;natural-earth-2&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class="hll">      <span class="s2">&quot;style&quot;</span><span class="o">:</span> <span class="s2">&quot;natural_earth_2.json&quot;</span><span class="p">,</span>
</span><span class="hll">      <span class="s2">&quot;tilejson&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class="hll">        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;overlay&quot;</span>
</span><span class="hll">      <span class="p">}</span>
</span><span class="hll">    <span class="p">}</span>
</span>  <span class="p">},</span>
  <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;natural_earth&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;mbtiles&quot;</span><span class="o">:</span> <span class="s2">&quot;natural_earth.mbtiles&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Parar <em>Ctrl+c</em> y arrancar el tileserver utilizando el archivo de configuración creado</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>tileserver-gl-light -c config.test.json -p <span class="m">8181</span>
</pre></div>
</td></tr></table>

<p>Modificar el archivo <em>index.html</em> para que el visor de mapa para cargue los datos de Natural Earth con el nuevo estilo creado</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Mapa VT<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#39;stylesheet&#39;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css&#39;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.js&#39;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;https://mapbox-gl-inspect.lukasmartinelli.ch/dist/mapbox-gl-inspect.css&#39;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#39;stylesheet&#39;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;https://mapbox-gl-inspect.lukasmartinelli.ch/dist/mapbox-gl-inspect.min.js&#39;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
        <span class="nt">html</span><span class="o">,</span> <span class="nt">body</span> <span class="p">{</span>
            <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;map&#39;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">mapboxgl</span><span class="p">.</span><span class="nx">Map</span><span class="p">({</span>
        <span class="nx">container</span><span class="o">:</span> <span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="c1">// id del elemento HTML que contendrá el mapa</span>
<span class="hll">        <span class="nx">style</span><span class="o">:</span> <span class="s1">&#39;http://localhost:8181/styles/natural-earth-2/style.json&#39;</span><span class="p">,</span> <span class="c1">// Ubicación del estilo</span>
</span>        <span class="nx">center</span><span class="o">:</span> <span class="p">[</span><span class="mf">2.175</span><span class="p">,</span> <span class="mf">41.39</span><span class="p">],</span> <span class="c1">// Ubicación inicial</span>
        <span class="nx">zoom</span><span class="o">:</span> <span class="mi">13</span><span class="p">,</span> <span class="c1">// Zoom inicial</span>
        <span class="nx">bearing</span><span class="o">:</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="c1">// Ángulo de rotación inicial</span>
        <span class="nx">hash</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">// Permite ir guardando la posición del mapa en la URL</span>
    <span class="p">});</span>

    <span class="c1">// Agrega controles de navegación (zoom, rotación) al mapa:</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">mapboxgl</span><span class="p">.</span><span class="nx">NavigationControl</span><span class="p">());</span>

    <span class="c1">// Agregar el control de inspección</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">MapboxInspect</span><span class="p">());</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../4_tippecanoe/" title="4. Cómo crearlas" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                4. Cómo crearlas
              </span>
            </div>
          </a>
        
        
          <a href="../6_sprites_glyphs/" title="6. Sprites y Glyphs" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Siguiente
                </span>
                6. Sprites y Glyphs
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b438e6c5.js"></script>
      
        
        
          
          <script src="../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../assets/javascripts/lunr/lunr.es.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>